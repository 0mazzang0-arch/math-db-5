## 문제
다음은 $1$부터 $n$까지의 자연수가 하나씩 적혀 있는 $n$개의 공이 들어 있는 주머니에서 임의로 세 개의 공을 동시에 꺼낼 때, 꺼낸 공에 적혀 있는 세 수 중 어느 두 수도 연속되지 않는 경우의 수를 구하는 과정이다. ($n \ge 5$)

주머니에서 꺼낸 세 개의 공에 적혀 있는 세 수 중 어느 두 수도 연속되지 않는 경우는
(ⅰ) 주머니에서 세 개의 공을 꺼내는 경우 에서
(ⅱ) 주머니에서 꺼낸 세 개의 공에 적혀 있는 세 수가 모두 연속되는 경우 와
(ⅲ) 주머니에서 꺼낸 세 개의 공에 적혀 있는 세 수 중 두 수만 연속되는 경우 를 제외하면 된다.

(ⅰ)의 경우 : $n$개의 공이 들어 있는 주머니에서 세 개의 공을 꺼내는 경우의 수는 ${}_{n}C_{3}$이다.
(ⅱ)의 경우 : 주머니에서 꺼낸 세 개의 공에 적혀 있는 세 수가 모두 연속되는 경우의 수는 $(n-2)$이다.
(ⅲ)의 경우 :
연속되는 두 수 중 하나가 $1$인 경우는 $2$는 반드시 포함되어야 하고 $3$은 포함되지 않아야 하므로 경우의 수는 $(가)$이고, 마찬가지로 연속되는 두 수 중 하나가 $n$인 경우의 수도 $(가)$이다.
또한 연속되는 두 수를 $k$, $k+1$ ($k=2, 3, \dots, n-2$)라 하면 이 경우의 수는 $(n-3)$이고, 각각의 경우에 $k, k+1$과 연속되지 않는 수가 적혀 있는 하나의 공을 더 선택하는 경우의 수는 $(n-4)$이므로 연속되는 두 수 중 어느 하나도 $1$과 $n$이 아닌 경우의 수는 $(나)$이다.
따라서 주머니에서 꺼낸 세 개의 공에 적혀 있는 세 수 중 두 수만 연속되는 경우의 수는 $2 \times (가) + (나)$이다.

(ⅰ), (ⅱ), (ⅲ)에 의하여 $n$개의 공이 들어 있는 주머니에서 꺼낸 세 개의 공에 적혀 있는 세 수 중 어느 두 수도 연속되지 않는 경우의 수는 $(다)$이다.

위의 $(가)$, $(나)$, $(다)$에 알맞은 식을 각각 $p(n)$, $q(n)$, $r(n)$이라 할 때, $\frac{p(18) \times q(17)}{r(16)}$의 값은?

## 보기
① $\frac{15}{2}$   ② $9$   ③ $\frac{21}{2}$   ④ $12$   ⑤ $\frac{27}{2}$

## 풀이
(ⅰ) 주머니에서 세 개의 공을 꺼내는 경우의 수:
$${}_{n}C_{3} = \frac{n(n-1)(n-2)}{6}$$

(ⅱ) 세 개의 공에 적혀 있는 세 수가 모두 연속되는 경우:
$(1, 2, 3), (2, 3, 4), \dots, (n-2, n-1, n)$ 이므로 $(n-2)$가지이다.

(ⅲ) 세 수 중 두 수만 연속되는 경우:
- 연속되는 두 수 중 하나가 $1$인 경우: $\{1, 2\}$를 반드시 포함하고 $3$은 포함하지 않아야 하므로, 남은 $n-3$개의 공 중 하나를 선택하는 경우의 수와 같다.
$\therefore p(n) = n-3$
- 연속되는 두 수 중 하나가 $n$인 경우: $\{n-1, n\}$을 포함하고 $n-2$를 제외하므로 $n-3$가지이다.
- 연속되는 두 수가 $1$과 $n$을 포함하지 않는 경우 ($k, k+1$ where $k=2, 3, \dots, n-2$):
$k, k+1$을 선택하는 경우의 수는 $n-3$가지이다. 이때 $k-1$과 $k+2$를 제외한 나머지 $n-4$개의 공 중 하나를 선택해야 하므로 경우의 수는 $(n-3)(n-4)$이다.
$\therefore q(n) = (n-3)(n-4)$

따라서 두 수만 연속되는 경우의 수는 $2(n-3) + (n-3)(n-4) = (n-3)(n-2)$이다.

(ⅰ), (ⅱ), (ⅲ)에 의하여 어느 두 수도 연속되지 않는 경우의 수 $r(n)$은:
$$r(n) = \frac{n(n-1)(n-2)}{6} - (n-2) - (n-3)(n-2)$$
$$r(n) = (n-2) \left[ \frac{n(n-1)}{6} - 1 - (n-3) \right]$$
$$r(n) = \frac{n-2}{6} [n^2 - n - 6 - 6n + 18]$$
$$r(n) = \frac{n-2}{6} [n^2 - 7n + 12]$$
$$r(n) = \frac{(n-2)(n-3)(n-4)}{6}$$

주어진 값을 대입하면:
$p(18) = 18 - 3 = 15$
$q(17) = (17-3)(17-4) = 14 \times 13$
$r(16) = \frac{(16-2)(16-3)(16-4)}{6} = \frac{14 \times 13 \times 12}{6} = 14 \times 13 \times 2$

따라서 구하는 값은:
$$\frac{p(18) \times q(17)}{r(16)} = \frac{15 \times 14 \times 13}{14 \times 13 \times 2} = \frac{15}{2}$$

정답: ①