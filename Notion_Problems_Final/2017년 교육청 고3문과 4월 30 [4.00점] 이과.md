## 문제

자연수 $n$에 대하여 $0$부터 $n$까지 정수가 하나씩 적힌 $(n+1)$개의 공이 들어 있는 상자가 있다. 이 상자에서 한 개의 공을 꺼내어 공에 적힌 수를 확인하고 다시 넣는 과정을 $5$번 반복할 때, 확인한 $5$개의 수가 다음 조건을 만족시키는 경우의 수를 $a_n$이라 하자.

(가) 꺼낸 공에 적힌 수는 먼저 꺼낸 공에 적힌 수보다 작지 않다.
(나) 세 번째 꺼낸 공에 적힌 수는 첫 번째 꺼낸 공에 적힌 수보다 $1$이 더 크다.

$\sum_{n=1}^{18} \frac{a_n}{n+2}$의 값을 구하시오.

## 풀이

자연수 $n$에 대하여 $0$부터 $n$까지 정수가 하나씩 $(n+1)$개의 공이 들어 있는 상자에서 $5$번의 과정 중 $m$번째 꺼낸 공에 적힌 수를 $f(m)$이라 할 때, 조건 (가)에 의하여 
$f(1) \le f(2) \le f(3) \le f(4) \le f(5)$
조건 (나)에 의하여 $f(3) = f(1) + 1$

$f(1) = a$ ($a = 0, 1, 2, \cdots, n-1$)이라 하면 $f(3) = a+1$
$a \le f(2) \le a+1 \le f(4) \le f(5)$

(ⅰ) $a=0$일 때, 
$0 \le f(2) \le 1 \le f(4) \le f(5)$
$f(2)$를 선택하는 경우는 $0$ 또는 $1$의 두 가지이고 $f(4)$, $f(5)$를 선택하는 경우의 수는 $1, 2, 3, \cdots, n$ 중에서 중복을 허락하여 $2$개를 선택하는 중복조합의 수와 같으므로
${}_{n}H_{2} = {}_{n+1}C_{2}$
$\therefore 2 \times {}_{n+1}C_{2}$

(ⅱ) $a=1$일 때, 
$1 \le f(2) \le 2 \le f(4) \le f(5)$
$f(2)$를 선택하는 경우는 $1$ 또는 $2$의 두 가지이고 $f(4)$, $f(5)$를 선택하는 경우의 수는 $2, 3, 4, \cdots, n$ 중에서 중복을 허락하여 $2$개를 선택하는 중복조합의 수와 같으므로
${}_{n-1}H_{2} = {}_{n}C_{2}$
$\therefore 2 \times {}_{n}C_{2}$

(ⅲ) $a=k$일 때, 
$k \le f(2) \le k+1 \le f(4) \le f(5)$
$f(2)$를 선택하는 경우는 $k$ 또는 $k+1$의 두 가지이고 $f(4)$, $f(5)$를 선택하는 경우의 수는 $k+1, k+2, k+3, \cdots, n$ 중에서 중복을 허락하여 $2$개를 선택하는 중복조합의 수와 같으므로
${}_{n-k}H_{2} = {}_{n-k+1}C_{2}$
$\therefore 2 \times {}_{n-k+1}C_{2}$

$0 \le k \le n-1$이므로
$a_n = 2({}_{n+1}C_{2} + {}_{n}C_{2} + {}_{n-1}C_{2} + \cdots + {}_{3}C_{2} + {}_{2}C_{2})$
$= 2({}_{2}C_{2} + {}_{3}C_{2} + {}_{4}C_{2} + \cdots + {}_{n}C_{2} + {}_{n+1}C_{2})$
$= 2({}_{3}C_{3} + {}_{3}C_{2} + {}_{4}C_{2} + \cdots + {}_{n}C_{2} + {}_{n+1}C_{2})$
한편, ${}_{n}C_{r-1} + {}_{n}C_{r} = {}_{n+1}C_{r}$ ($1 \le r \le n$)이므로
$a_n = 2 \times {}_{n+2}C_{3} = \frac{n(n+1)(n+2)}{3}$

$\therefore \sum_{n=1}^{18} \frac{a_n}{n+2} = \sum_{n=1}^{18} \frac{n(n+1)}{3} = \frac{1}{3} \sum_{n=1}^{18} (n^2 + n)$
$= \frac{1}{3} \left( \frac{18 \times 19 \times 37}{6} + \frac{18 \times 19}{2} \right) = 760$

**[다른 풀이]**
자연수 $n$에 대하여 $0$부터 $n$까지 정수가 하나씩 적힌 $(n+1)$개의 공이 들어 있는 상자에서 $5$번의 과정 중 $m$번째 꺼낸 공에 적힌 수를 $f(m)$이라 할 때,
조건 (가)에 의하여 $f(1) \le f(2) \le f(3) \le f(4) \le f(5)$
조건 (나)에 의하여 $f(3) = f(1) + 1$
$f(1) = a$ ($a = 0, 1, 2, \cdots, n-1$)이라 하면 $f(3) = a+1$
$a \le f(2) \le a+1 \le f(4) \le f(5)$

(ⅰ) $f(2)$를 선택하는 경우는 $f(2) = a$ 또는 $f(2) = a+1$이므로 $2$가지 $\cdots$ ㉠
(ⅱ) $f(3)$이 결정되면 $f(1)$은 유일하므로 $f(3), f(4), f(5)$를 선택하는 경우만 고려하면 된다.
$f(3) = a+1 \ge 1$이므로 $f(3), f(4), f(5)$를 선택하는 경우는 $1$부터 $n$까지 수 중에서 중복을 허락하여 $3$개를 선택하는 중복조합의 수와 같다.
${}_{n}H_{3}$ $\cdots$ ㉡

㉠, ㉡에 의하여
$a_n = 2 \times {}_{n}H_{3} = 2 \times {}_{n+2}C_{3} = 2 \times \frac{n(n+1)(n+2)}{6} = \frac{n(n+1)(n+2)}{3}$

$\therefore \sum_{n=1}^{18} \frac{a_n}{n+2} = 760$