## 문제
좌표공간에 평면 $\alpha: 2x+y+2z-9=0$과 구 $S:(x-4)^{2}+(y+3)^{2}+z^{2}=2$가 있다. $|\vec{OP}| \le 3\sqrt{2}$인 평면 $\alpha$ 위의 점 $P$와 구 $S$ 위의 점 $Q$에 대하여 $\vec{OP} \cdot \vec{OQ}$의 최댓값이 $a+b\sqrt{2}$일 때, $a+b$의 값을 구하시오. (단, 점 $O$는 원점이고, $a$, $b$는 유리수이다.)

## 보기
(해당 문제에 보기가 없습니다.)

## 풀이
$O(0,0,0)$에서 평면 $2x+y+2z-9=0$에 내린 수선의 발을 $H$라 하면 $H(2,1,2)$이고, 원점과 평면 사이의 거리 $d = \frac{|-9|}{\sqrt{2^{2}+1^{2}+2^{2}}} = \frac{9}{3} = 3$이다.
점 $P$는 평면 $\alpha$ 위의 점이고 $|\vec{OP}| \le 3\sqrt{2}$이므로, $\vec{OH} \perp \vec{HP}$에서 $|\vec{OH}|^{2} + |\vec{HP}|^{2} = |\vec{OP}|^{2}$이다.
$3^{2} + |\vec{HP}|^{2} \le (3\sqrt{2})^{2} = 18$
$|\vec{HP}|^{2} \le 9 \Rightarrow |\vec{HP}| \le 3$
따라서 $P$는 평면 $\alpha$ 위에서 중심이 $H(2,1,2)$이고 반지름이 $3$인 원판 내부 및 경계의 점이다.

> [!example] 📸 (그림/그래프)

구 $S$의 중심을 $O'(4,-3,0)$, 반지름을 $r = \sqrt{2}$라 하면, $\vec{OP} \cdot \vec{OQ} = \vec{OP} \cdot (\vec{OO'} + \vec{O'Q}) = \vec{OP} \cdot \vec{OO'} + \vec{OP} \cdot \vec{O'Q}$이다.
여기서 벡터 $\vec{OO'}$와 $\vec{O'Q}$의 크기는 각각 $|\vec{OO'}| = \sqrt{4^{2}+(-3)^{2}+0^{2}} = 5$와 $|\vec{O'Q}| = \sqrt{2}$로 일정하다.

$\vec{OP}$와 $\vec{O'Q}$가 이루는 각은 모든 방향이 가능하므로, $\vec{OP} \cdot \vec{O'Q}$는 $|\vec{OP}| = 3\sqrt{2}$이고 두 벡터의 방향이 일치할 때 최댓값 $3\sqrt{2} \times \sqrt{2} = 6$을 갖는다.

$\vec{OP} \cdot \vec{OO'}$는 $|\vec{OP}| = 3\sqrt{2}$이고 $\vec{OP}$와 $\vec{OO'}$가 이루는 각의 크기가 최소일 때 최댓값을 갖는다.
평면 $\alpha$의 법선벡터를 $\vec{v} = (2,1,2)$라 하고, $\vec{v}$와 $\vec{OO'} = (4,-3,0)$이 이루는 각의 크기를 $\alpha$라 하면
$\cos \alpha = \frac{|\vec{v} \cdot \vec{OO'}|}{|\vec{v}||\vec{OO'}|} = \frac{|(2,1,2) \cdot (4,-3,0)|}{3 \times 5} = \frac{8-3+0}{15} = \frac{5}{15} = \frac{1}{3}$
이때 $\sin \alpha = \sqrt{1 - (\frac{1}{3})^{2}} = \frac{2\sqrt{2}}{3}$이다.

$\vec{OP}$와 $\vec{v}$가 이루는 각의 크기를 $\theta$라 하면 $\cos \theta = \frac{|\vec{OH}|}{|\vec{OP}|} = \frac{3}{3\sqrt{2}} = \frac{1}{\sqrt{2}}$이므로 $\theta = \frac{\pi}{4}$이다.
따라서 $\vec{OP}$와 $\vec{OO'}$가 이루는 각의 최솟값은 $\alpha - \frac{\pi}{4}$이다.
$\cos(\alpha - \frac{\pi}{4}) = \cos \alpha \cos \frac{\pi}{4} + \sin \alpha \sin \frac{\pi}{4} = \frac{1}{3} \times \frac{\sqrt{2}}{2} + \frac{2\sqrt{2}}{3} \times \frac{\sqrt{2}}{2} = \frac{4+\sqrt{2}}{6}$

따라서 $\vec{OP} \cdot \vec{OO'}$의 최댓값은 $3\sqrt{2} \times 5 \times \frac{4+\sqrt{2}}{6} = \frac{5\sqrt{2}(4+\sqrt{2})}{2} = 10\sqrt{2} + 5$이다.

그러므로 $\vec{OP} \cdot \vec{OQ}$의 최댓값은 $(5+10\sqrt{2}) + 6 = 11+10\sqrt{2}$이다.
$a = 11$, $b = 10$이므로 $a+b = 11+10 = 21$이다.

정답: $21$