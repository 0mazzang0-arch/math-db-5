## 문제
$1$부터 $9$까지의 자연수가 하나씩 적혀 있는 $9$개의 공이 주머니에 들어 있다. 이 주머니에서 공을 한 개씩 모두 꺼낼 때, $i$번째 ($i = 1, 2, \dots, 9$) 꺼낸 공에 적혀 있는 수를 $a_{i}$라 하자. $1 < p < q < 9$인 두 자연수 $p, q$에 대하여 $a_{i}$가 다음 조건을 만족시킨다.

(가) $1 \leq i < p$이면 $a_{i} < a_{i+1}$이다.
(나) $p \leq i < q$이면 $a_{i} > a_{i+1}$이다.
(다) $q \leq i < 9$이면 $a_{i} < a_{i+1}$이다.

$a_{1} = 2, a_{p} = 8$인 모든 경우의 수를 구하시오.

## 보기

## 풀이
$a_{p+1}$부터 $a_{9}$까지의 $(9-p)$개의 수 중에서 최솟값은 $a_{q}$, 즉 $a_{q} = 1$이고, $9$는 $a_{p} = 8$보다 큰 수이므로 최댓값은 $a_{9} = 9$이다.

(ⅰ) $p$번째 사이의 공을 꺼내는 경우의 수는 $a_{1} = 2, a_{p} = 8, a_{q} = 1, a_{9} = 9$가 적힌 공을 제외한 $5$개의 공 중에서 $(p-2)$개의 공을 꺼내는 조합의 수이므로 ${}_{5}C_{p-2}$이다.

(ⅱ) $p$번째와 $q$번째 사이의 공을 꺼내는 경우의 수는 $a_{q} = 1, a_{9} = 9$가 적힌 공을 제외한 $(9-p-2) = (7-p)$개의 공 중에서 $(q-p-1)$개의 공을 꺼내는 조합의 수이므로 ${}_{7-p}C_{q-p-1}$이다.

(ⅲ) $q$번째와 $9$번째 사이의 공은 정해진다.
이때, $p$가 정해지면 $q$가 취할 수 있는 값은 $p+1$부터 $8$까지이므로 (ⅱ)에 의해 
$$\sum_{q=p+1}^{8} {}_{7-p}C_{q-p-1}$$
$q-p-1 = k$로 놓으면 $q = p+1$일 때 $k = 0$이고, $q = 8$일 때 $k = 7-p$이므로 
$$\sum_{q=p+1}^{8} {}_{7-p}C_{q-p-1} = \sum_{k=0}^{7-p} {}_{7-p}C_{k} = (1+1)^{7-p} = 2^{7-p}$$
$p$의 값은 $2$부터 $7$까지 취할 수 있다. 그러므로 구하는 값은 (ⅰ)에 의해
$$\sum_{p=2}^{7} {}_{5}C_{p-2} 2^{7-p}$$
따라서 $p-2 = r$로 놓으면 $p = 2$일 때 $r = 0$이고, $p = 7$일 때 $r = 5$이므로
$$\sum_{p=2}^{7} {}_{5}C_{p-2} 2^{7-p} = \sum_{r=0}^{5} {}_{5}C_{r} 2^{5-r} = (2+1)^{5} = 243$$

**[다른 풀이]**
구하는 경우의 수는 $a_{1} = 2, a_{p} = 8, a_{q} = 1, a_{9} = 9$가 적힌 $4$개의 공을 제외한 $5$개의 공을 첫 번째와 $p$번째 사이, $p$번째와 $q$번째 사이, $q$번째와 $9$번째 사이로 나누는 경우의 수와 같다. 그러므로
$${}_{5}C_{0} \times ({}_{5}C_{0} \cdot {}_{5}C_{5} + {}_{5}C_{1} \cdot {}_{4}C_{4} + {}_{5}C_{2} \cdot {}_{3}C_{3} + {}_{5}C_{3} \cdot {}_{2}C_{2} + {}_{5}C_{4} \cdot {}_{1}C_{1} + {}_{5}C_{5} \cdot 1)$$
$$+ {}_{5}C_{1} \times ({}_{4}C_{0} \cdot {}_{4}C_{4} + {}_{4}C_{1} \cdot {}_{3}C_{3} + {}_{4}C_{2} \cdot {}_{2}C_{2} + {}_{4}C_{3} \cdot {}_{1}C_{1} + {}_{4}C_{4} \cdot 1)$$
$$+ {}_{5}C_{2} \times ({}_{3}C_{0} \cdot {}_{3}C_{3} + {}_{3}C_{1} \cdot {}_{2}C_{2} + {}_{3}C_{2} \cdot {}_{1}C_{1} + {}_{3}C_{3} \cdot 1)$$
$$+ {}_{5}C_{3} \times ({}_{2}C_{0} \cdot {}_{2}C_{2} + {}_{2}C_{1} \cdot {}_{1}C_{1} + {}_{2}C_{2} \cdot 1)$$
$$+ {}_{5}C_{4} \times ({}_{1}C_{0} \cdot {}_{1}C_{1} + {}_{1}C_{1} \cdot 1)$$
$$+ {}_{5}C_{5} \times (1 \cdot 1) = 243$$

**[다른 풀이]**
$a_{p+1}$부터 $a_{9}$까지의 $(9-p)$개의 수 중에서 최솟값은 $a_{q}$, 즉 $a_{q} = 1$이고, $9$는 $a_{p} = 8$보다 큰 수이므로 최댓값은 $a_{9} = 9$이다.
$3$이 적힌 공을 꺼내는 경우는 첫 번째와 $p$번째 사이, $p$번째와 $q$번째 사이, $q$번째와 $9$번째 사이 중 하나이므로 그 경우의 수는 $3$이다. $4, 5, 6, 7$이 적힌 공을 꺼내는 경우의 수도 같은 방법으로 생각하면 각각 $3$이다. 따라서 구하는 경우의 수는 $3^{5} = 243$이다.

**[정답]** $243$