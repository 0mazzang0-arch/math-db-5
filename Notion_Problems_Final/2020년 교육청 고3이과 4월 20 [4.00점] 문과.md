## 문제
집합 $X = \{ 1 , 2 , 3 , 4 , 5 \}$에 대하여 함수 $f : X \to X$의 치역을 $A$, 합성함수 $f \circ f$의 치역을 $B$라 할 때, 두 집합 $A , B$가 다음 조건을 만족시킨다.

- $n ( A ) \geq 3$
- 집합 $A$의 모든 원소의 합이 $3$의 배수이다.
- $n ( A ) > n ( B )$

다음은 함수 $f$의 개수를 구하는 과정이다.

(ⅰ) $n ( A ) = 3$이고 모든 원소의 합이 $3$의 배수인 집합 $A$는
$\{ 1 , 2 , 3 \} , \{ 1 , 3 , 5 \} , \{ 2 , 3 , 4 \} , \{ 3 , 4 , 5 \}$
$A = \{ 1 , 2 , 3 \}$인 경우 $n ( B ) < 3$이므로 집합 $B$는
$\{ 1 \} , \{ 2 \} , \{ 3 \} , \{ 1 , 2 \} , \{ 1 , 3 \} , \{ 2 , 3 \}$
$A = \{ 1 , 2 , 3 \} , B = \{ 1 \}$인 경우 함수 $f$의 개수는 (가)이고,
$A = \{ 1 , 2 , 3 \} , B = \{ 1 , 2 \}$인 경우 $f$의 개수는 (나)이므로 $n ( A ) = 3 , n ( B ) < 3$이고 집합 $A$의 모든 원소의 합이 $3$의 배수가 되도록 하는 함수 $f$의 개수는
$4 \times ( 3 \times (가) + 3 \times (나) )$이다.

(ⅱ) $n ( A ) = 4$이고 모든 원소의 합이 $3$의 배수인 집합 $A$는 $\{ 1 , 2 , 4 , 5 \}$뿐이므로 이 경우 $n ( B ) < 4$를 만족시키는 함수 $f$의 개수는 (다)이다.

(ⅲ) $n ( A ) = 5$인 경우 함수 $f$는 일대일대응이고 $n ( B ) = 5$이므로 $n ( A ) > n ( B )$를 만족시키는 함수 $f$는 존재하지 않는다.

(ⅰ), (ⅱ), (ⅲ)에 의하여 구하는 함수 $f$의 개수는
$4 \times ( 3 \times (가) + 3 \times (나) ) + (다)$이다.

위의 (가), (나), (다)에 알맞은 수를 각각 $p , q , r$라 할 때, $p + q + r$의 값은?

## 보기
① $164$   ② $168$   ③ $172$   ④ $176$   ⑤ $180$

## 풀이
(ⅰ) $n ( A ) = 3$이고 모든 원소의 합이 $3$의 배수인 집합 $A$는 $\{ 1 , 2 , 3 \} , \{ 1 , 3 , 5 \} , \{ 2 , 3 , 4 \} , \{ 3 , 4 , 5 \}$이다.
$A = \{ 1 , 2 , 3 \}$인 경우 $n ( B ) < 3$이므로 집합 $B$는 $\{ 1 \} , \{ 2 \} , \{ 3 \} , \{ 1 , 2 \} , \{ 1 , 3 \} , \{ 2 , 3 \}$이다.

(a) $A = \{ 1 , 2 , 3 \} , B = \{ 1 \}$인 경우
$A$의 원소인 $1 , 2 , 3$이 $1$에 대응하는 경우의 수는 $1$이고, $4 , 5$가 $2 , 3$에 하나씩 대응하는 경우의 수는 $2$이므로 $A = \{ 1 , 2 , 3 \} , B = \{ 1 \}$인 $f$의 개수는 $1 \times 2 = 2$이다.

(b) $A = \{ 1 , 2 , 3 \} , B = \{ 1 , 2 \}$인 경우
$\{ f ( 1 ) , f ( 2 ) , f ( 3 ) \} = \{ 1 , 2 \}$이고 $4 , 5$가 $1 , 2 , 3$에 대응하되 적어도 하나가 $3$에 대응하는 경우이므로 $A = \{ 1 , 2 , 3 \} , B = \{ 1 , 2 \}$인 함수 $f$의 개수는 $( 2^3 - 2 ) \times ( 3^2 - 2^2 ) = 6 \times 5 = 30$이다.

(a), (b)와 같은 경우가 각각 $3$가지이므로 $n ( A ) = 3 , n ( B ) < 3$이고 집합 $A$의 모든 원소의 합이 $3$의 배수가 되도록 하는 함수 $f$의 개수는 $4 \times ( 3 \times 2 + 3 \times 30 )$이다.

(ⅱ) $n ( A ) = 4$이고 모든 원소의 합이 $3$의 배수인 집합 $A$는 $\{ 1 , 2 , 4 , 5 \}$뿐이므로 이 경우 $X - A = \{ 3 \}$에 의해 $n ( B ) = 3$이므로 집합 $B$는 $\{ 1 , 2 , 4 \} , \{ 1 , 2 , 5 \} , \{ 1 , 4 , 5 \} , \{ 2 , 4 , 5 \}$이다.
$A = \{ 1 , 2 , 4 , 5 \} , B = \{ 1 , 2 , 4 \}$인 경우 $f ( 3 ) = 5$이고 집합 $A$의 원소 중 어떠한 두 원소는 서로 같은 함숫값을 가져야 하므로 $1 , 2 , 4$를 $f ( 1 ) , f ( 2 ) , f ( 4 ) , f ( 5 )$의 값으로 정하는 경우의 수는 $3 \times \frac{4!}{2!} = 3 \times 12 = 36$이다.
$n ( A ) = 4 , n ( B ) < 4$이고 집합 $A$의 모든 원소의 합이 $3$의 배수가 되도록 하는 함수 $f$의 개수는 $4 \times 36 = 144$이다.

(ⅲ) $n ( A ) = 5$인 경우 함수 $f$는 일대일대응이고 $n ( B ) = 5$이므로 조건 $n ( A ) > n ( B )$를 만족시키는 함수 $f$는 존재하지 않는다.

(ⅰ), (ⅱ), (ⅲ)에 의하여 구하는 함수 $f$의 개수는 $4 \times ( 3 \times 2 + 3 \times 30 ) + 144$이다.
따라서 $p = 2 , q = 30 , r = 144$이므로 $p + q + r = 176$이다.

정답은 ④이다.