## 문제

아래 그림은 어떤 오락기를 단순화하여 그린 것이다. 이 오락기는 입구에 공을 넣으면 `$A$`, `$B$`, `$C$`, `$D$` 중 어느 한 곳을 지나면서 그 위치의 꺼져 있는 전등은 켜지고, 켜져 있는 전등은 꺼지도록 되어 있다. 예를 들어 전구가 모두 꺼진 상태에서 공을 `$2$`번 넣어 `$2$`번 모두 `$A$`를 지나면 `$A$` 위치의 전등은 켜졌다 꺼지고, 각각 `$A$`, `$B$`를 지나면 `$A$`, `$B$` `$2$` 위치에 있는 전등은 모두 켜지게 된다. 이와 같이 공이 지날 때마다 전등이 켜지거나 꺼지기를 반복하다가 `$A$`, `$B$`, `$C$`, `$D$` `$4$`곳 모두 전등이 켜지면 게임은 끝난다.

> [!example] 📸 (그림/그래프)

`$6$`번째 공을 넣었을 때 이 게임이 끝나게 될 확률을 `$\frac{a}{b}$` (`$a$`, `$b$`는 서로소인 자연수)라고 하자. 이 때, `$a+b$`의 값을 구하시오.

**[조건]**
- 처음 상태는 전등이 모두 꺼져 있으며, 갈림길에서 양쪽 방향으로 공이 지나갈 확률은 서로 같다.

## 풀이

투입된 공이 `$A, B, C, D$`에 도달할 확률은 각각 `$\frac{1}{2^2} = \frac{1}{4}$`이다.

`$4$`곳 모두 전등이 켜진 상태로 게임이 종료되려면, `$6$`개의 공이 도달한 횟수가 각각 홀수여야 한다. 합이 `$6$`이 되는 `$4$`개의 홀수는 `(3, 1, 1, 1)` 조합뿐이다.

`$6$`개의 공 중 `$A$`에 `$3$`개, `$B, C, D$`에 각각 `$1$`개씩 도달하는 경우의 수는 `$A, A, A, B, C, D$`를 일렬로 나열하는 경우의 수와 같으므로 `$\frac{6!}{3!} = 120$`이다.

이 중 `$4$`번째 공을 넣었을 때 게임이 미리 끝나는 경우를 제외해야 한다. `$4$`번째 공에서 게임이 끝나는 경우는 처음 `$4$`개의 공이 `$A, B, C, D$`에 각각 `$1$`개씩 도달하는 경우인 `$4! = 24$`가지이다. (이 경우 나머지 `$5, 6$`번째 공은 반드시 `$3$`번 도달해야 하는 위치에 연속으로 들어와야 하므로 경우의 수는 `$24 \times 1 = 24$`이다.)

따라서 어느 한 곳이 `$3$`번 도달하고 나머지 세 곳이 `$1$`번씩 도달하여 `$6$`번째에 게임이 끝나는 경우의 수는 다음과 같다.
`$$ 4 \times \left( \frac{6!}{3!} - 4! \right) = 4 \times (120 - 24) = 4 \times 96 = 384 $$`

구하는 확률 `$\frac{a}{b}$`는 다음과 같다.
`$$ \frac{a}{b} = 384 \times \left( \frac{1}{4} \right)^6 = \frac{384}{4096} = \frac{3}{32} $$`

`$a=3$`, `$b=32$`이며 `$a, b$`는 서로소인 자연수이므로,
`$a+b = 3 + 32 = 35$`

[정답] `$35$`